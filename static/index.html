<!DOCTYPE html>
<html lang="en" dir="ltr" itemscope itemtype="http://schema.org/Organization" prefix="og: http://ogp.me/ns#">

  <head>

    <!-- Meta tags -->
    <meta charset="utf-8">
    <meta name="viewport"     content="width=device-width, initial-scale=1">
    <meta name="description"  content="Group audio calls on your phone... and just that.">

    <!-- Page title -->
    <title>Grouphone</title>

    <!-- Link elements, including stylesheets -->
    <link rel="icon"          href="/img/logo-16.png" sizes="16x16" type="image/png" />
    <link rel="icon"          href="/img/logo-32.png" sizes="32x32" type="image/png" />

    <link rel="stylesheet"    href="//fonts.googleapis.com/css?family=Alegreya+Sans:300,700,300italic" />
    <link rel="stylesheet"    href="/css/style.css" />

    <!-- Polyfil for IE -->
    <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-57958355-2', 'auto');
      ga('send', 'pageview');
    </script>

  </head>

  <body>
    <section id="teaser">
      <div>
        <img class="mainLogo" src="/img/logo-256.png">
        <h1>Grouphone</h1>
        <h4>Group audio calls on your phone... and just that.</h4>
        <a href="#invite" id="request" class="button">Request Beta Invite</a>
      <div>
    </section>
    <section id="features">
      <div>
        <h4>Talk to friends, over internet</h4>
        <h4>From your favorite smartphone</h4>
        <h3>Create a call or, join a call</h3>
        <h2>Invite others or, get invited</h2>
      </div>
    </section>
    <section id="requires">
      <div>
        <h3>All you need is <b>Grouphone</b></h3>
        <h4>Active internet connection</h4>
        <h5>and some friends to talk to.</h5>
      </div>
    </section>
    <section id="invite">
      <div>
        <h4>Forever free on <b>Firefox OS</b>, launching this March</h4>
        <h3>Coming soon on Android and iOS</h3>
        <h2>Interested?</h2>
        <label id="actionItem">
          <input type="email" id="invitee" placeholder="Email ID" />
          <button id="sendRequest">Let Me In</button>
        </label>
        <p id="disclaimer">
          We'll only email you to send the invitation.
          <br />
          We won't do anything shady... promise!
        </p>
      </div>
    </section>

    <script src="js/vendor/jquery.js"></script>
    <script src="js/vendor/jquery.mousewheel.js"></script>
    <script src="js/vendor/jquery.smooth-scroll.js"></script>
    <script>
      $("#request").smoothScroll();

      var timeDelta = Date.now();
      $(document).on("mousewheel", function(event) {
        if (Date.now() - timeDelta > 750) {
          if (event.deltaY < 0) {
            $.smoothScroll($(document).scrollTop() + $(window).height());
          }
          if (event.deltaY > 0) {
            $.smoothScroll($(document).scrollTop() - $(window).height());
          }
          timeDelta = Date.now();
        }
        return false;
      });

      $("#sendRequest").click(function (event) {
        if (!$("#invitee").val().trim()) {
          $("#invitee").attr("placeholder", "Email ID, please!").focus();
          return false;
        }
        var endpoint = "/api/requestinvite/" + $("#invitee").val();
        $.ajax({
          type:     "post",
          cache:    false,
          url:      endpoint,
          success:  function (result) {
            $("#actionItem").html("<h5>" + result.message + "</h5>");
          },
          error:    function (error) {
            $("#actionItem").append("<h5>" + error.responseJSON.message + "</h5>");
          }
        });
      });

    </script>
  </body>
</html>
